<html>
<head>
</head>
  <body>
    <script>      
      
      function openApp(scheme, type, hash, fallback){
        if (scheme.length > 0 && type.length > 0 && hash.length > 0) {
          window.location.replace(`${scheme+type}/${hash}`);              
        }
        
        setTimeout(function () {
            window.location.replace(fallback); 
        },3000);
      }
      
      let type = window.location.search.replace(/[^\w]/, "");
      let hash = window.location.hash.replace(/[^\w]/, "")
      var scheme = "flxloopsy://";
      var app_url = "https://apps.apple.com/app/id1513460317";

        if (type == "trx") {
          scheme = "flxloopsy://";
          app_url = "https://apps.apple.com/app/id1513460317";
        }
        else if (type == "bww") {
          scheme = "loopsy://";
          app_url = "https://apps.apple.com/app/1520188807";
        }

      openApp(scheme,type,hash, app_url);

      
      (function() {
    var link = document.querySelector("link[rel*='icon']") || document.createElement('link');
    link.type = "image/png";
    link.rel = 'shortcut icon';
    link.href = `favicon_${type}.png`;
    document.getElementsByTagName('head')[0].appendChild(link);
        
    var meta = document.querySelector("meta[name*='description']") || document.createElement('meta');
    meta.name = "description";
    if (type == "trx"){
       meta.content = "Trx exercises and workout plan";
    }
    else {
       meta.content = "Fitness exercises and workout plan";
    }
    document.getElementsByTagName('head')[0].appendChild(link);
})();

      
      
//       (async () => {
//         const response = await fetch('https://api.github.com/repos/flxoopsy/experimental/contents/trx?ref=master');
//         const data = await response.json();
//         let htmlString = '<ul>';
//         for (let file of data) {
//           htmlString += `<li><a href="flxloopsy://${file.path.replace(/\.[^/.]+$/, "")}">data.json</a></li>`;
//         }
//         htmlString += '</ul>';
//         document.getElementsByTagName('body')[0].innerHTML = htmlString;
//       })()
    </script>
  <body>
</html>
